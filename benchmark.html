

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Benchmark &mdash; Documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.png"/>
  
  
  

  

  
  
    

  
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/audeering.css" type="text/css" />
  <link rel="stylesheet" href="_static/jupyter-sphinx.css" type="text/css" />
  <link rel="stylesheet" href="_static/thebelab.css" type="text/css" />
  <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="_static/plot_directive.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="audiofile" href="api/audiofile.html" />
    <link rel="prev" title="Usage" href="usage.html" />
    
  

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          <a href="index.html">
          
            <img src="_static/images/audeering.png" class="logo" alt="audEERING"/>
          
          
            <span> audiofile</span>
          
          </a>

          
            
            
              <div class="version">
                v1.3.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Benchmark</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#procedure">Procedure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#audio-files">Audio files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#python-packages">Python packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reading-files">Reading files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#accessing-metadata">Accessing metadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-the-benchmark">Running the benchmark</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#wav-flac-ogg">WAV, FLAC, OGG</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Reading files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">Accessing metadata</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#mp3-mp4">MP3, MP4</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id3">Reading files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">Accessing metadata</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api/audiofile.html">audiofile</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">audiofile</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Benchmark</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/audeering/audiofile/" class="fa fa-github"> GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="benchmark">
<h1>Benchmark<a class="headerlink" href="#benchmark" title="Permalink to this heading">¶</a></h1>
<p>We benchmarked several Python audio reading libraries
against each other.
The procedure follows the <a class="reference external" href="https://github.com/faroit/python_audio_loading_benchmark">python_audio_loading_benchmark project</a>.</p>
<div class="section" id="procedure">
<h2>Procedure<a class="headerlink" href="#procedure" title="Permalink to this heading">¶</a></h2>
<p>The benchmark loads 160 single channel audio files
and measures the time until the audio is converted
to a <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.array</span></code>.</p>
<div class="section" id="audio-files">
<h3>Audio files<a class="headerlink" href="#audio-files" title="Permalink to this heading">¶</a></h3>
<p>All files have a sampling rate of 44100 Hz,
and contain white noise.
They are generated by sox.
They differ in length between 1 second and 151 seconds,
in 10 seconds steps, including 10 files per length.
Leading to an overall of 160 files per audio format.
Starting from the WAV files,
FLAC, OGG, MP3, and MP4 files were generated using <a class="reference external" href="https://ffmpeg.org/">ffmpeg</a>.</p>
</div>
<div class="section" id="python-packages">
<h3>Python packages<a class="headerlink" href="#python-packages" title="Permalink to this heading">¶</a></h3>
<p>The following Python packages are benchmarked against each other:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/beetbox/audioread/">audioread</a> 3.0.1</p></li>
<li><p><a class="reference internal" href="api/audiofile.html#module-audiofile" title="audiofile"><code class="xref py py-mod docutils literal notranslate"><span class="pre">audiofile</span></code></a> 1.3.0</p></li>
<li><p><a class="reference external" href="https://github.com/librosa/librosa/">librosa</a> 0.10.1</p></li>
<li><p><a class="reference external" href="https://github.com/spotify/pedalboard">pedalboard</a> 0.8.6</p></li>
<li><p><a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.io.wavfile.read.html">scipy</a> 1.11.4</p></li>
<li><p><a class="reference external" href="https://github.com/bastibe/SoundFile/">soundfile</a> 0.21.1</p></li>
<li><p><a class="reference external" href="https://github.com/rabitt/pysox/">sox</a> 1.4.1</p></li>
</ul>
<p><a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.io.wavfile.read.html">scipy</a> and <a class="reference external" href="https://github.com/librosa/librosa/">librosa</a> are only tested for reading files,
whereas <a class="reference external" href="https://github.com/rabitt/pysox/">sox</a> is only tested for accessing metadata information.
<a class="reference external" href="https://github.com/beetbox/audioread/">audioread</a> can use three different libraries under the hood:
<a class="reference external" href="https://ffmpeg.org/">ffmpeg</a>, <a class="reference external" href="https://gstreamer.freedesktop.org/">gstreamer</a>, <a class="reference external" href="https://sourceforge.net/projects/mad/">mad</a>.
<a class="reference external" href="https://sourceforge.net/projects/mad/">mad</a> works only for MP3 files,
and is only benchmarked for those.
As <a class="reference external" href="https://gstreamer.freedesktop.org/">gstreamer</a> is slow and complicated to install
it is not included in the benchmarks.</p>
</div>
<div class="section" id="reading-files">
<h3>Reading files<a class="headerlink" href="#reading-files" title="Permalink to this heading">¶</a></h3>
<p>The benchmark loads the audio files
and measures the time until the audio is converted
to a <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.array</span></code>.</p>
</div>
<div class="section" id="accessing-metadata">
<h3>Accessing metadata<a class="headerlink" href="#accessing-metadata" title="Permalink to this heading">¶</a></h3>
<p>For benchmark accessing metadata information,
the following was requested for every file:</p>
<ul class="simple">
<li><p>channels</p></li>
<li><p>duration</p></li>
<li><p>samples</p></li>
<li><p>sampling rate</p></li>
</ul>
</div>
<div class="section" id="running-the-benchmark">
<h3>Running the benchmark<a class="headerlink" href="#running-the-benchmark" title="Permalink to this heading">¶</a></h3>
<p>The benchmark was executed on the following machine:</p>
<ul class="simple">
<li><p>CPU: Intel(R) Core(TM) i7-8750H CPU &#64; 2.20GHz x 12</p></li>
<li><p>RAM: 15.37 GB</p></li>
<li><p>Hard drive: Samsung SSD 860</p></li>
<li><p>Linux: Ubuntu 18.04.6</p></li>
<li><p>Python: 3.10.11</p></li>
</ul>
<p>To rerun the benchmark yourself,
clone the repository
and execute:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>docs/benchmark/
$<span class="w"> </span>bash<span class="w"> </span>install_dependencies.sh
$<span class="w"> </span>bash<span class="w"> </span>generate_audio.sh
$<span class="w"> </span>bash<span class="w"> </span>run.sh
</pre></div>
</div>
<p>This requires that Python 3.10 is installed
and will ask for a sudo password
to install missing apt packages.</p>
</div>
</div>
<div class="section" id="wav-flac-ogg">
<h2>WAV, FLAC, OGG<a class="headerlink" href="#wav-flac-ogg" title="Permalink to this heading">¶</a></h2>
<div class="section" id="id1">
<h3>Reading files<a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h3>
<p><a class="reference external" href="https://github.com/beetbox/audioread/">audioread</a> has been removed from the results
as it was the slowest library.
<a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.io.wavfile.read.html">scipy</a> is only meant for reading WAV files,
and only included in this figure.</p>
<img alt="_images/benchmark_wav-flac-ogg_read.png" src="_images/benchmark_wav-flac-ogg_read.png" />
<p>Results for <a class="reference internal" href="api/audiofile.html#module-audiofile" title="audiofile"><code class="xref py py-mod docutils literal notranslate"><span class="pre">audiofile</span></code></a>, <a class="reference external" href="https://github.com/bastibe/SoundFile/">soundfile</a> and <a class="reference external" href="https://github.com/librosa/librosa/">librosa</a> are similar here
as all of them use <a class="reference external" href="https://github.com/bastibe/SoundFile/">soundfile</a> under the hood to read the data.</p>
</div>
<div class="section" id="id2">
<h3>Accessing metadata<a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h3>
<p><a class="reference external" href="https://github.com/beetbox/audioread/">audioread</a> (ffmpeg) and <a class="reference external" href="https://github.com/rabitt/pysox/">sox</a> have been removed from the results
as they take around 0.17s and 0.035s per file
for WAV, FLAC, and OGG.</p>
<img alt="_images/benchmark_wav-flac-ogg_info.png" src="_images/benchmark_wav-flac-ogg_info.png" />
</div>
</div>
<div class="section" id="mp3-mp4">
<h2>MP3, MP4<a class="headerlink" href="#mp3-mp4" title="Permalink to this heading">¶</a></h2>
<div class="section" id="id3">
<h3>Reading files<a class="headerlink" href="#id3" title="Permalink to this heading">¶</a></h3>
<p><a class="reference external" href="https://github.com/bastibe/SoundFile/">soundfile</a> does not support
reading MP3 and MP4 files,
<a class="reference external" href="https://github.com/beetbox/audioread/">audioread</a> (mad) and <a class="reference external" href="https://github.com/spotify/pedalboard">pedalboard</a> only MP3 files.</p>
<img alt="_images/benchmark_mp3-mp4_read.png" src="_images/benchmark_mp3-mp4_read.png" />
</div>
<div class="section" id="id4">
<h3>Accessing metadata<a class="headerlink" href="#id4" title="Permalink to this heading">¶</a></h3>
<p><a class="reference external" href="https://github.com/bastibe/SoundFile/">soundfile</a> does not support
accessing MP3 and MP4 metadata.
<a class="reference external" href="https://github.com/rabitt/pysox/">sox</a>, <a class="reference external" href="https://github.com/beetbox/audioread/">audioread</a> (mad) and <a class="reference external" href="https://github.com/spotify/pedalboard">pedalboard</a> only for MP3 files.</p>
<img alt="_images/benchmark_mp3-mp4_info.png" src="_images/benchmark_mp3-mp4_info.png" />
<p>For MP3 and MP4 files,
<a class="reference internal" href="api/audiofile.html#module-audiofile" title="audiofile"><code class="xref py py-mod docutils literal notranslate"><span class="pre">audiofile</span></code></a> is not very fast in accessing the metadata.
The main focus was not speed,
but consistent results for number of samples and duration.
This can only be achieved by first converting the file to WAV
as the duration will depend on the used decoder.
You can speed up the processing by setting <code class="docutils literal notranslate"><span class="pre">sloppy=True</span></code>
as argument to <a class="reference internal" href="api/audiofile.duration.html#audiofile.duration" title="audiofile.duration"><code class="xref py py-func docutils literal notranslate"><span class="pre">audiofile.duration()</span></code></a>.
This tries to read the duration from the header of the file
and is shown as audiofile (sloppy)
in the figure.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="api/audiofile.html" class="btn btn-neutral float-right" title="audiofile" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="usage.html" class="btn btn-neutral float-left" title="Usage" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div>
    <p>
        
        
        
          Built with <a href="https://www.sphinx-doc.org/en/master/">Sphinx</a> on 2023/12/05 using the <a href="https://github.com/audeering/sphinx-audeering-theme/">audEERING theme</a>
        
    </p>
  </div>

  <div role="contentinfo">
    <p>
        
      &copy; 2018-2023 audEERING GmbH
    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  



  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
        <script src="_static/thebelab-helper.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>